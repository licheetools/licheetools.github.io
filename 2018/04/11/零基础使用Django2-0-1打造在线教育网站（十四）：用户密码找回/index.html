<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="编程思录，记录思考">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://blog.licheetools.top">
    <!--SEO-->

    <meta name="keywords" content="django建站">


    <meta name="description" content="写在前面本篇笔记我们将实现用户的激活，用户密码找回，重置密码，修改密码等功能，前面所介绍的知识大家没事可以复习一下，加深对知识的理解和应用，后面很多东西就是前面讲过的知识的应用。
本篇笔记对应于...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>零基础使用Django2.0.1打造在线教育网站（十四）：用户密码找回 | 编程思录，记录思考</title>


    <link rel="alternate" href="/atom.xml" title="编程思录，记录思考" type="application/atom+xml">


    <link rel="icon" href="./favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(https://upload-images.jianshu.io/upload_images/8964398-b1ba9582ea8b69ba.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="Envy">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 点滴进步，都是收获 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://blog.licheetools.top">编程思录，记录思考</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/font/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/java/"><i class="fa "></i>Java</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/django/"><i class="fa "></i>Django</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/flask/"><i class="fa "></i>Flask</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/spider/"><i class="fa "></i>爬虫</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/data/"><i class="fa "></i>数据分析</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/money/"><i class="fa "></i>付费教程</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/life/"><i class="fa "></i>生活记录</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives"><i class="fa "></i>时间轴</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/about/"><i class="fa "></i>关于博主</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/liuyan/"><i class="fa "></i>留言板</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="零基础使用Django2.0.1打造在线教育网站（十四）：用户密码找回">
            
	            零基础使用Django2.0.1打造在线教育网站（十四）：用户密码找回
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/django/">django</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/django建站/">django建站</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/04/11</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>本篇笔记我们将实现用户的激活，用户密码找回，重置密码，修改密码等功能，前面所介绍的知识大家没事可以复习一下，加深对知识的理解和应用，后面很多东西就是前面讲过的知识的应用。</p>
<p>本篇笔记对应于第十四篇代码，对应于github的位置是<a href="https://github.com/licheetools/eduline。" target="_blank" rel="noopener">https://github.com/licheetools/eduline。</a></p>
<h2 id="用户激活的操作"><a href="#用户激活的操作" class="headerlink" title="用户激活的操作"></a>用户激活的操作</h2><p>打开我们的Navicat，去数据库中找到我们的用户信息表：<img src="https://upload-images.jianshu.io/upload_images/8964398-689a06f410addd9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>这里面有个字段<strong>is_active</strong>，它是用来判别用户是否激活的，默认是未激活也就是0，这里都是1肯定是不行的，所以我们需要定义激活用户的函数，来完成用户的激活操作。</p>
<p>先配置一下路径path，打开eduline/urls.py文件，在里面添加一行代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import  re_path</span><br><span class="line">from users.views import ActiveUserView  #ActiveUserView目前未定义，后面马上定义</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 激活用户url</span><br><span class="line">re_path(&apos;active/(?P&lt;active_code&gt;.*)/&apos;, ActiveUserView.as_view(), name=&quot;user_active&quot;)</span><br></pre></td></tr></table></figure></p>
<p><code>&#39;active/(?P&lt;active_code&gt;.*)/&#39;</code>是正则表达式模式，用于匹配验证码！</p>
<p>打开users/views.py文件，我们设置默认未激活：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 默认激活状态为False，也就是未激活</span><br><span class="line">user_profile.is_active = False</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-ff871e44a48a1a9a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>并且在下面新增代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">from .models import EmailVerifyRecord</span><br><span class="line"></span><br><span class="line"># 用于实现用户激活操作的函数</span><br><span class="line">class ActiveUserView(View):</span><br><span class="line">    def get(self, request, active_code):</span><br><span class="line">        # 用于查询邮箱验证码是否存在</span><br><span class="line">        all_record = EmailVerifyRecord.objects.filter(code=active_code)</span><br><span class="line"> </span><br><span class="line">        if all_record:</span><br><span class="line">            for record in all_record:</span><br><span class="line">                # 获取到对应的邮箱</span><br><span class="line">                email = record.email</span><br><span class="line">                # 查找到邮箱对应的用户</span><br><span class="line">                user = UserProfile.objects.filter(email=email)</span><br><span class="line">                user.is_active = True #激活用户</span><br><span class="line">                user.save()</span><br><span class="line">                # 激活成功跳转到登录页面</span><br><span class="line">            return render(request, &quot;login.html&quot;)</span><br></pre></td></tr></table></figure></p>
<p>现在回到我们的LoginView函数，我们当时没有判断用户是否激活，现在需要判断，修改代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if user is not None:</span><br><span class="line">               if user.is_active:</span><br><span class="line">                   # login 有两个参数：request和user。我们在请求的时候，request实际上是写进了一部分信息，然后在render的时候，这些信息也被返回前端页面从而完成用户登录</span><br><span class="line">                   login(request, user)</span><br><span class="line">                   # 页面跳转至网站首页 user request也会被带回到首页，显示登录状态</span><br><span class="line">                   return render(request, &quot;index.html&quot;)</span><br><span class="line">               else:</span><br><span class="line">                   return render(request, &quot;login.html&quot;, &#123;&apos;msg&apos;: &apos;用户未激活！&apos;&#125;)</span><br><span class="line">           else:</span><br><span class="line">               # 说明里面的值是None，再次跳转回主页面并报错，这里仅当用户密码出错时才返回</span><br><span class="line">               return render(request, &quot;login.html&quot;, &#123;&apos;msg&apos;: &apos;用户名或者密码错误！&apos;&#125;)</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-9a7583795e3c7256.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>将数据表中的<a href="mailto:licheetools@sina.cn" target="_blank" rel="noopener">licheetools@sina.cn</a>    用户的is_active修改为0，我们来测试一下，在图中所示位置打上断点，开始调试：<img src="https://upload-images.jianshu.io/upload_images/8964398-0d1caf9841f6cadc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>我们的用户测试激活调试没有问题，再来看一下验证码激活：我们去新浪邮箱，将获取到的链接访问一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请点击下面的链接激活你的账号: http://127.0.0.1:8000/active/HekaM6EfZfeKy1Zc</span><br></pre></td></tr></table></figure></p>
<p>按图示来测试一下，也没有问题！</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-9b8d2ed7e01b277c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>至此，我们完成了邮箱验证码的激活以及用户的激活。</p>
<p>不过我们还有两个问题，一个就是前面没有判断邮箱是否已经存在，我们不能用旧的邮箱来注册，所以我们需要配置一下，打开users/views.py文件，修改代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">def post(self, request):</span><br><span class="line">    # 类的实例化需要一个字典dict参数，而前面我们就知道request.POST是一个QueryDict，所以可以直接传入POST中的信息</span><br><span class="line">    register_form = RegisterForm(request.POST)</span><br><span class="line">    if register_form.is_valid():</span><br><span class="line">        user_name = request.POST.get(&quot;email&quot;, &quot;&quot;)</span><br><span class="line">        if UserProfile.objects.filter(email=user_name):</span><br><span class="line">            # register_form回填信息必须有，msg是信息提示</span><br><span class="line">            return render(request, &apos;register.html&apos;, &#123;&apos;register_form&apos;: register_form&#125;, &#123;&apos;msg&apos;: &apos;该邮箱已被注册过了&apos;&#125;)</span><br><span class="line">        else:</span><br><span class="line">            # password为前端页面name的返回值，取到用户名和密码我们就开始进行登录验证;取不到时为空。</span><br><span class="line">            pass_word = request.POST.get(&quot;password&quot;, &quot;&quot;)</span><br><span class="line">            # 实例化一个user_profile对象，存入前端页面获取的值</span><br><span class="line">            user_profile = UserProfile()</span><br><span class="line">            user_profile.username = user_name</span><br><span class="line">            user_profile.email = user_name</span><br><span class="line"></span><br><span class="line">            # 默认激活状态为False，也就是未激活</span><br><span class="line">            user_profile.is_active = False</span><br><span class="line"></span><br><span class="line">            # 对password进行加密并保存</span><br><span class="line">            user_profile.password = make_password(pass_word)</span><br><span class="line">            user_profile.save()</span><br><span class="line">            send_register_eamil(user_name, &apos;register&apos;)</span><br><span class="line">            pass</span><br></pre></td></tr></table></figure></p>
<p>另一个就是我们对于链接的处理不够完善，正如你所了解的那样，链接肯定有有效时间，在这个规定的时间内点击才有用，过了规定时间就没有用，所以我们需要新建一个链接超时的html文件：新建<strong>active_fail.html</strong>文件，里面就几行代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;链接失效&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;对不起，链接失效了&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我们来users/views.py文件，修改一下激活的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 用于实现用户激活操作的函数</span><br><span class="line">class ActiveUserView(View):</span><br><span class="line">    def get(self, request, active_code):</span><br><span class="line">        # 用于查询邮箱验证码是否存在</span><br><span class="line">        all_record = EmailVerifyRecord.objects.filter(code=active_code)</span><br><span class="line">        if all_record:</span><br><span class="line">            for record in all_record:</span><br><span class="line">                # 获取到对应的邮箱</span><br><span class="line">                email = record.email</span><br><span class="line">                # 查找到邮箱对应的用户</span><br><span class="line">                user = UserProfile.objects.filter(email=email)</span><br><span class="line">                user.is_active = True</span><br><span class="line">                user.save()</span><br><span class="line">        else:</span><br><span class="line">            return render(request, &quot;active_fail.html&quot;)</span><br><span class="line">        # 激活成功跳转到登录页面</span><br><span class="line">        return render(request, &quot;login.html&quot;)</span><br></pre></td></tr></table></figure></p>
<p>按照图示打上断点并开始调试：<img src="https://upload-images.jianshu.io/upload_images/8964398-c2e97efa56488de3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>调试没有问题！</p>
<p>好，解决了上面两个问题之后，下面我们来进行忘记密码，找回密码的操作。</p>
<h2 id="忘记密码的操作"><a href="#忘记密码的操作" class="headerlink" title="忘记密码的操作"></a>忘记密码的操作</h2><h3 id="拷贝forgetpwd页面"><a href="#拷贝forgetpwd页面" class="headerlink" title="拷贝forgetpwd页面"></a>拷贝forgetpwd页面</h3><p>将<strong>forgetpwd.html</strong>页面拷贝到我们的templates文件夹里面：<img src="https://upload-images.jianshu.io/upload_images/8964398-2cf4e7d30eb40eea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="定义（忘记）找回密码的视图"><a href="#定义（忘记）找回密码的视图" class="headerlink" title="定义（忘记）找回密码的视图"></a>定义（忘记）找回密码的视图</h3><p>打开users/views.py文件，在里面添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 用于实现用户忘记码（找回密码）的函数</span><br><span class="line">class ForgetPwdView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        return render(request, &quot;forgetpwd.html&quot;, &#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>然后在eduline/urls.py文件里面配置url信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from users.views import  ForgetPwdView</span><br><span class="line"></span><br><span class="line"># 找回密码url，注意是普通的url</span><br><span class="line">path(&quot;forget/&quot;, ForgetPwdView.as_view(), name=&quot;forget_pwd&quot;),</span><br></pre></td></tr></table></figure></p>
<p>接下来配置跳转路径，首先ctrl+F 搜索<strong>login.html</strong>,找到忘记密码，修改href属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a class=&quot;fr&quot; href=&quot;forgetpwd.html&quot;&gt;忘记密码？&lt;/a&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-5dbefe1d42ea6315.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>修改为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a class=&quot;fr&quot; href=&quot;&#123;% url &apos;forget_pwd&apos; %&#125;&quot;&gt;忘记密码？&lt;/a&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意外部有双引号，里面就只能使用单引号。</strong></p>
<p>接着继续修改<strong>forgetpwd.html</strong>页面的跳转链接，一样的操作，这里就不演示了！</p>
<p>现在运行一下我们的项目，在浏览器地址栏中输入：<a href="http://127.0.0.1:8000/forget/，出现了：![](https://upload-images.jianshu.io/upload_images/8964398-37f7bdbd37ebfc15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)" target="_blank" rel="noopener">http://127.0.0.1:8000/forget/，出现了：![](https://upload-images.jianshu.io/upload_images/8964398-37f7bdbd37ebfc15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</a><br>样式没有加载出来，我们需要和前面的一样，加上静态相对路径，忘记的小伙伴可以查看第十一篇笔记：<a href="https://www.jianshu.com/p/9019d6de27ae" target="_blank" rel="noopener">零基础使用Django2.0.1打造在线教育网站（十一）：登录页面实现</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、页面第三行加上&#123;% load staticfiles %&#125;</span><br><span class="line">2、修改全部类型文件的static相对路径</span><br><span class="line">3、修改其中的url，配置跳转链接</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-577753e9e07b4f51.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>配置完刷新一下页面：<img src="https://upload-images.jianshu.io/upload_images/8964398-b378d9c411266bcd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>这个页面其实也是一个表单，所以需要定义form表单，我们可以仿照注册的表单来书写，打开我们的users/forms.py文件，在里面添加一下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 用户找回密码时的表单，注意字段与前端页面保持一致</span><br><span class="line">class ForgetForm(forms.Form):</span><br><span class="line">    email = forms.CharField(required=True)  # 用户名不能为空</span><br><span class="line">    captcha = CaptchaField(error_messages=&#123;&quot;invalid&quot;: &quot;验证码错误&quot;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>接着回到我们的views.py文件，继续完善ForgetPwdView：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from users.forms import  ForgetForm</span><br><span class="line"></span><br><span class="line"># 用于实现用户忘记码（找回密码）的函数</span><br><span class="line">class ForgetPwdView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        forget_form = ForgetForm()</span><br><span class="line">        return render(request, &quot;forgetpwd.html&quot;, &#123;&apos;forget_form&apos;: forget_form&#125;)</span><br></pre></td></tr></table></figure></p>
<p>然后回到我们的forgetpwd.html页面，我们删除captcha那一行，并修改为：<img src="https://upload-images.jianshu.io/upload_images/8964398-770faa6555d646d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;form-group captcha1 marb38&quot;&gt;</span><br><span class="line">                        &lt;label&gt;验&amp;nbsp;证&amp;nbsp;码&lt;/label&gt;</span><br><span class="line">                        &#123;&#123; forget_form.captcha &#125;&#125;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>我们再来刷新一下我们的页面：<img src="https://upload-images.jianshu.io/upload_images/8964398-dba85389b2810052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>页面正常显示了！</p>
<p>既然我们是找回密码，那么我们肯定需要发送邮件，我们前面新建了发送失败的html页面，那我们肯定也需要新建一个发送成功的html页面吧,新建<strong>send_success.html</strong>文件：<img src="https://upload-images.jianshu.io/upload_images/8964398-0700d1c263d79d13.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>里面添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;邮件发送成功&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;邮件已发送，请注意查收！&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>还是回到我们的views.py文件，继续完善ForgetPwdView的post方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 用于实现用户忘记码（找回密码）的函数</span><br><span class="line">class ForgetPwdView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        forget_form = ForgetForm()</span><br><span class="line">        return render(request, &quot;forgetpwd.html&quot;, &#123;&apos;forget_form&apos;: forget_form&#125;)</span><br><span class="line"></span><br><span class="line">    def post(self, request):</span><br><span class="line">        forget_form = ForgetForm(request.POST)</span><br><span class="line">        if forget_form.is_valid():</span><br><span class="line">            email = request.POST.get(&apos;email&apos;, &apos;&apos;)</span><br><span class="line">            # 发送找回密码的邮件</span><br><span class="line">            send_register_eamil(email, &apos;forget&apos;)</span><br><span class="line">            return render(request, &apos;send_success.html&apos;)</span><br><span class="line">        else:</span><br><span class="line">            return render(request, &quot;forgetpwd.html&quot;, &#123;&apos;forget_form&apos;: forget_form&#125;)</span><br></pre></td></tr></table></figure></p>
<p>再回到前端页面，看看这些是不是都修改完了：<img src="https://upload-images.jianshu.io/upload_images/8964398-6a6e6f7a1bf8b13c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>还有页面的提示信息也要修改（参考前面的介绍）：<img src="https://upload-images.jianshu.io/upload_images/8964398-63fb69409a287ab3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>至此，我们密码找回就已经完成了，我们来测试一下：<br><img src="https://upload-images.jianshu.io/upload_images/8964398-f40edd5a85d88efc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><img src="https://upload-images.jianshu.io/upload_images/8964398-f7baf6b767bf6f09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><img src="https://upload-images.jianshu.io/upload_images/8964398-eb392ec907dc3a8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>测试成功了！</p>
<p>下面完成重置密码和修改密码的操作！</p>
<h2 id="重置密码的操作"><a href="#重置密码的操作" class="headerlink" title="重置密码的操作"></a>重置密码的操作</h2><h3 id="拷贝password-reset-html页面"><a href="#拷贝password-reset-html页面" class="headerlink" title="拷贝password_reset.html页面"></a>拷贝password_reset.html页面</h3><p>将<strong>password_reset.html</strong>页面拷贝到我们的templates文件夹里面：<img src="https://upload-images.jianshu.io/upload_images/8964398-c0160afd89704377.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="定义重置密码的视图"><a href="#定义重置密码的视图" class="headerlink" title="定义重置密码的视图"></a>定义重置密码的视图</h3><p>打开users/views.py文件，在里面添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 用于实现用户重置密码的函数</span><br><span class="line">class ResetView(View):</span><br><span class="line">    def get(self, request, active_code):</span><br><span class="line">        # 用于查询邮箱验证码是否存在</span><br><span class="line">        all_record = EmailVerifyRecord.objects.filter(code=active_code)</span><br><span class="line">        if all_record:</span><br><span class="line">            for record in all_record:</span><br><span class="line">                # 获取到对应的邮箱</span><br><span class="line">                email = record.email</span><br><span class="line">                # 查找到邮箱对应的用户</span><br><span class="line">                return render(request, &quot;password_reset.html&quot;, &#123;&quot;email&quot;: email&#125;)   # 告诉页面是哪个用户在重置密码</span><br><span class="line">        else:</span><br><span class="line">            return render(request, &quot;active_fail.html&quot;)</span><br><span class="line">        # 激活成功跳转到登录页面</span><br><span class="line">        return render(request, &quot;login.html&quot;)</span><br></pre></td></tr></table></figure></p>
<p>然后在eduline/urls.py文件里面配置url信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from users.views import  ResetView</span><br><span class="line"></span><br><span class="line"> # 密码重置url</span><br><span class="line">    re_path(&apos;reset/(?P&lt;active_code&gt;.*)/&apos;, ResetView.as_view(), name=&quot;reset_pwd&quot;),</span><br></pre></td></tr></table></figure></p>
<p>接下来我们在页面隐式回填刚才的email，在<strong>password_reset.html</strong>页面，添加下面一行代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;&#123;&#123; email &#125;&#125;&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>就是这个样子：<img src="https://upload-images.jianshu.io/upload_images/8964398-bc1cb52f0b368592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>现在调试一下我们的项目，在图示位置打上断点：<img src="https://upload-images.jianshu.io/upload_images/8964398-310aae9aade6db7b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>接着我们登录新浪邮箱（前面是QQ邮箱就用QQ邮箱），查找我们的之前的重置密码邮件：<br><img src="https://upload-images.jianshu.io/upload_images/8964398-44ed0d322f3398f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>接着将重置密码链接复制到浏览器地址栏打开，页面进入到Pycharm出现了：<img src="https://upload-images.jianshu.io/upload_images/8964398-1e212ddba3a46e51.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>然后step out结束：<img src="https://upload-images.jianshu.io/upload_images/8964398-57a40adbebe992e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>还记得我们刚才在里面加的那个input么，它的作用是告知页面哪个用户此时此刻正在重置密码，我们点击查看网页源代码，看是不是input起了作用：<img src="https://upload-images.jianshu.io/upload_images/8964398-58227cfa325da20c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>看到没有，确实起了作用，不过我们除非查看了源码，否则是看不到的！</p>
<p>不过样式没有加载出来，我们需要和前面的一样，加上静态相对路径，忘记的小伙伴可以查看第十一篇笔记：<a href="https://www.jianshu.com/p/9019d6de27ae" target="_blank" rel="noopener">零基础使用Django2.0.1打造在线教育网站（十一）：登录页面实现</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、页面第三行加上&#123;% load staticfiles %&#125;</span><br><span class="line">2、修改全部类型文件的static相对路径</span><br><span class="line">3、修改其中的url，配置跳转链接</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-a8daf97ac6ab3696.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>配置完以后我们刷新页面会出错，这是正常现象，因为我们在url跳转时缺少参数，这个先放在这里（如果你为了不影响心情，可以不刷新页面）！</p>
<p>刚才那个页面其实也是一个表单，所以需要定义form表单，我们可以仿照注册的表单来书写，打开我们的users/forms.py文件，在里面添加一下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 用户修改密码时的表单，注意字段与前端页面保持一致</span><br><span class="line">class ModifyPwdForm(forms.Form):</span><br><span class="line">    password1 = forms.CharField(required=True, min_length=5)  # 新密码不能为空</span><br><span class="line">    password2 = forms.CharField(required=True, min_length=5)  # 确认密码不能为空</span><br></pre></td></tr></table></figure></p>
<p>记得与前端页面字段一致：<img src="https://upload-images.jianshu.io/upload_images/8964398-74dd66ddb34d19a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>接着回到我们的views.py文件，继续完善ResetView：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from users.forms import  ModifyPwdForm</span><br><span class="line"></span><br><span class="line">    def post(self, request):</span><br><span class="line">        modify_form = ModifyPwdForm(request.POST)</span><br><span class="line">        if modify_form.is_valid():</span><br><span class="line">            pwd1 = request.POST.get(&quot;password1&quot;, &apos;&apos;)</span><br><span class="line">            pwd2 = request.POST.get(&quot;password2&quot;, &apos;&apos;)</span><br><span class="line">            email = request.POST.get(&quot;email&quot;, &apos;&apos;)</span><br><span class="line">            # 如果前后两次密码不相等，那么回填信息并返回错误提示</span><br><span class="line">            if pwd1 != pwd2:</span><br><span class="line">                return render(request, &quot;password_reset.html&quot;, &#123;&quot;email&quot;: email, &quot;msg&quot;: &quot;对不起，前后密码不一致&quot;&#125;)</span><br><span class="line">            # 如果前后两次密码相等，那么进入我们的密码修改保存</span><br><span class="line">            # 取出用户信息</span><br><span class="line">            user = UserProfile.objects.get(email=email)</span><br><span class="line">            # 随意取出一个密码并将其进行加密</span><br><span class="line">            user.password = make_password(pwd1)</span><br><span class="line">            # 将更新后的用户信息保存到数据库里面</span><br><span class="line">            user.save()</span><br><span class="line">            # 密码重置成功以后，跳转到登录页面</span><br><span class="line">            return render(request, &quot;login.html&quot;, &#123;&quot;msg&quot;: &quot;恭喜您，您的密码修改成功，请登录&quot;&#125;)</span><br><span class="line">        else:</span><br><span class="line">            email = request.POST.get(&quot;email&quot;, &apos;&apos;)</span><br><span class="line">            return render(request, &quot;password_reset.html&quot;, &#123;&quot;email&quot;: email, &quot;modify_form&quot;: modify_form&#125;)</span><br></pre></td></tr></table></figure></p>
<p>我们现在来解决刚才url出错的问题，我们在path中的配置是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re_path(&apos;reset/(?P&lt;active_code&gt;.*)/&apos;, ResetView.as_view(), name=&quot;reset_pwd&quot;),</span><br></pre></td></tr></table></figure></p>
<p>它和我们普通的path不一样，里面有一个匹配active_code的正则表达式，所以在前端页面不能和普通的url那样写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">action=&quot;&#123;% url &apos;reset_pwd&apos; %&#125;&quot;</span><br></pre></td></tr></table></figure></p>
<p>既然不能这样写，那我们可以用一个普通的path来定义它，作用是修改密码即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from users.views import  ModifyPwdView</span><br><span class="line"></span><br><span class="line"># 修改密码url</span><br><span class="line">path(&quot;modify/&quot;, ModifyPwdView.as_view(), name=&quot;modify_pwd&quot;),</span><br></pre></td></tr></table></figure></p>
<p>这里面的ModifyPwdView是我们新建的视图函数，可以将前面的ResetView中的post方法脱离出来，成为ModifyPwdView的一部分：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 用于实现用户修改密码的函数</span><br><span class="line">class ModifyPwdView(View):</span><br><span class="line">    def post(self, request):</span><br><span class="line">        modify_form = ModifyPwdForm(request.POST)</span><br><span class="line">        if modify_form.is_valid():</span><br><span class="line">            pwd1 = request.POST.get(&quot;password1&quot;, &apos;&apos;)</span><br><span class="line">            pwd2 = request.POST.get(&quot;password2&quot;, &apos;&apos;)</span><br><span class="line">            email = request.POST.get(&quot;email&quot;, &apos;&apos;)</span><br><span class="line">            # 如果前后两次密码不相等，那么回填信息并返回错误提示</span><br><span class="line">            if pwd1 != pwd2:</span><br><span class="line">                return render(request, &quot;password_reset.html&quot;, &#123;&quot;email&quot;: email, &quot;msg&quot;: &quot;对不起，前后密码不一致&quot;&#125;)</span><br><span class="line">            # 如果前后两次密码相等，那么进入我们的密码修改保存</span><br><span class="line">            # 取出用户信息</span><br><span class="line">            user = UserProfile.objects.get(email=email)</span><br><span class="line">            # 随意取出一个密码并将其进行加密</span><br><span class="line">            user.password = make_password(pwd1)</span><br><span class="line">            # 将更新后的用户信息保存到数据库里面</span><br><span class="line">            user.save()</span><br><span class="line">            # 密码重置成功以后，跳转到登录页面</span><br><span class="line">            return render(request, &quot;login.html&quot;, &#123;&quot;msg&quot;: &quot;恭喜您，您的密码修改成功，请登录&quot;&#125;)</span><br><span class="line">        else:</span><br><span class="line">            email = request.POST.get(&quot;email&quot;, &apos;&apos;)</span><br><span class="line">            return render(request, &quot;password_reset.html&quot;, &#123;&quot;email&quot;: email, &quot;modify_form&quot;: modify_form&#125;)</span><br></pre></td></tr></table></figure></p>
<p>也就是这个样子：<img src="https://upload-images.jianshu.io/upload_images/8964398-93104c4150de4e03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>然后修改前端页面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=&quot;reset_password_form&quot; action=&quot;&#123;% url &apos;modify_pwd&apos; %&#125;&quot; method=&quot;post&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>也就是这个样子：<img src="https://upload-images.jianshu.io/upload_images/8964398-c7cf843ced54c659.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>在图示位置打上断点,开始调试我们的项目，具体操作和前面类似，这里就不介绍了。<img src="https://upload-images.jianshu.io/upload_images/8964398-460688e374b3afe0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>复制密码重置链接去浏览器地址栏打开，输入新的密码：<br><img src="https://upload-images.jianshu.io/upload_images/8964398-b4d17a5ce747ad8f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>然后点击提交按钮，就进入下面的Pycharm页面：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-f495897e541f5a28.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p><strong>注意：如果点击提交按钮没有反应，页面没有进入view.py里面的方法，可能是按钮的类型错了，type=”submit”而不是type=”button”，也就是这个样子：</strong><img src="https://upload-images.jianshu.io/upload_images/8964398-76b3224e0ce4817c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>最后，修改<strong>password_reset.html</strong>的错误信息的提示：<img src="https://upload-images.jianshu.io/upload_images/8964398-70c9aca9f3044fe0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>前面说了这么多调试命令，小伙伴们可能会不太明白其中的意思，下面我详细介绍一下Pycharm是如何调试代码的！</p>
<h2 id="Pycharm中的调试"><a href="#Pycharm中的调试" class="headerlink" title="Pycharm中的调试"></a>Pycharm中的调试</h2><p>如果你熟悉Eclipse，那你肯定知道它的快捷键：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">F5：跳入方法</span><br><span class="line">F6：向下逐行调试</span><br><span class="line">F7：跳出方法</span><br><span class="line">F8：直接跳转到下一个断点</span><br></pre></td></tr></table></figure></p>
<p>当然Pycharm也是可以采用Eclipse的快捷键来调试代码的，具体设置方法如下：</p>
<p>点击File–&gt; Settings–&gt; Apperance–&gt; Keymap–&gt; 右侧下拉选Eclipse–&gt; Apply –&gt; OK这几步就完成了，没看懂的可以看下面的图片（记得按照序号的顺序来操作哈）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-69b4a5a2982797df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>当然如果你没用过Eclipse，也不想记那些快捷键，这也是可以的，那看下面的图片：<img src="https://upload-images.jianshu.io/upload_images/8964398-b62f2965bd305534.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>这个页面你总是经常看到吧，下面分别解释一下各个键的名称及功能作用（括号内是默认的快捷键，也就是Pycharm自己设定的）：</p>
<hr>
<ul>
<li>1、step over（F8）作用是在同一个调用栈层中移动到下一个可执行的代码行。如果当前行是一个函数调用，则调试器将在函数调用之后的下一条语句停止。调试器不会进入函数体。如果当前行是函数的最后一行，则step-over将进入下一个栈层，并在调用函数的下一行停止。</li>
</ul>
<hr>
<hr>
<ul>
<li>2、step into（F7）作用是移动到下一个可执行的代码行。如果当前行是一个函数调用，则调试器将进入函数，并停止在函数体的第一行。step-into可以帮助初步揭开代码位置的谜团。例如，函数调用和函数本身可能在不同的文件中是函数的最后一行，则step-over将进入下一个栈层，并在调用函数的下一行停止。</li>
</ul>
<hr>
<hr>
<ul>
<li>3、Force step into（Ctrl+shift+F7）可以看做是step into的升级版本，可以越过代码，强力执行。</li>
</ul>
<hr>
<hr>
<ul>
<li>4、step-out（shift+F8）作用是在栈中前进到下一层，并在调用函数的下一行停止。</li>
</ul>
<hr>
<p>还有，如果你有多个断点，如何在pycharm中从第一个断点跳转至第二个断点呢？<br>例如第一个断点在第一行，第二个断点在第五十行，那么开始debug后，你首先停在第一行，随后点击菜单栏的Run-&gt; Resume Program即可跳转至第二个断点了，是不是很简单!</p>
<p>至此，关于用户的激活，用户密码找回，重置密码，修改密码，调试代码等功能的介绍就到此为止，感谢你的赏阅！</p>
<p>本篇笔记对应于第十四篇代码，对应于github的位置是<a href="https://github.com/licheetools/eduline。" target="_blank" rel="noopener">https://github.com/licheetools/eduline。</a></p>

    </div>
    
        <div class="reward" ontouchstart>
    <div class="reward-wrap">赏
        <div class="reward-box">
            
            
                <span class="reward-type">
                    <img class="wechat" src="https://upload-images.jianshu.io/upload_images/8964398-58d04ffa926103d9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">觉得不错，赏包辣条吃呗！</p>
</div>


    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href target="_blank">编程思录</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/04/12/零基础使用Django2-0-1打造在线教育网站（十五）：模板继承应用/" class="pre-post btn btn-default" title="零基础使用Django2.0.1打造在线教育网站（十五）：模板继承应用">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">零基础使用Django2.0.1打造在线教育网站（十五）：模板继承应用</span>
        </a>
    
    
        <a href="/2018/04/11/零基础使用Django2-0-1打造在线教育网站（十三）：邮箱验证码实现/" class="next-post btn btn-default" title="零基础使用Django2.0.1打造在线教育网站（十三）：邮箱验证码实现">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">零基础使用Django2.0.1打造在线教育网站（十三）：邮箱验证码实现</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '8zvHFFu5l2ah8lh0DEPH393B-gzGzoHsz',
            appKey: 'UNmB24200qMtyyrun5z99nOE',
            placeholder: '听说长得好看的，都已经留言了！',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#写在前面"><span class="toc-text">写在前面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户激活的操作"><span class="toc-text">用户激活的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#忘记密码的操作"><span class="toc-text">忘记密码的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#拷贝forgetpwd页面"><span class="toc-text">拷贝forgetpwd页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义（忘记）找回密码的视图"><span class="toc-text">定义（忘记）找回密码的视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重置密码的操作"><span class="toc-text">重置密码的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#拷贝password-reset-html页面"><span class="toc-text">拷贝password_reset.html页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义重置密码的视图"><span class="toc-text">定义重置密码的视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pycharm中的调试"><span class="toc-text">Pycharm中的调试</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <span>Copyright &copy; 2017-2019
                </span> |
                <span>
				编程思录,保留所有权利
                    <!--Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>-->
                </span> |
                <span>
				<a style="color: #black" href="http://www.miitbeian.gov.cn">赣ICP备18013455号-5</a>
                    <!--Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>-->
                </span>
            </div>
			
			<div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>

            </div>
			
			<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277113902'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s96.cnzz.com/z_stat.php%3Fid%3D1277113902%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
        </div>
    </div>
</div>




    <script src="/assets/tagcanvas.min.js?rev=2.9"></script>
    <script>
        var tagOption = {
            textColour: 'red', // 字体颜色
            outlineMethod: 'block', // 选中模式
            outlineColour: '#FFDAB9', // 选中模式的颜色
            interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
            textHeight: 13,
            outlineRadius: 3,
            freezeActive: true || '', // 选中的标签是否继续滚动
            frontSelect: true || '', // 不选标签云后部的标签
            initial: [0.1, -0.1],
            depth: 0.5,
            decel: 0.95,
            maxSpeed: 0.03,
            reverse: true || '', // 是否反向触发
            fadeIn: 500, // 进入动画时间
            wheelZoom: false || '' // 是否启用鼠标滚轮
        }
        TagCanvas.Start('tag-cloud-3d','',tagOption);
    </script>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>