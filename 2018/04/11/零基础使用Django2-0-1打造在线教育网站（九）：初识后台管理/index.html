<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="编程思录，记录思考">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://licheetools.github.io">
    <!--SEO-->

    <meta name="keywords" content="django建站">


    <meta name="description" content="写在前面在前面的笔记中我们进行了需求分析和数据库的设计，本篇笔记主要介绍Django自带的用于后台管理的admin，并在此基础上介绍另一个插件xadmin的使用。
本篇笔记对应于第九篇代码，对应...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>零基础使用Django2.0.1打造在线教育网站（九）：初识后台管理 | 编程思录，记录思考</title>


    <link rel="alternate" href="/atom.xml" title="编程思录，记录思考" type="application/atom+xml">


    <link rel="icon" href="./favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(https://upload-images.jianshu.io/upload_images/8964398-b1ba9582ea8b69ba.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="Envy">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 点滴进步，都是收获 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://licheetools.github.io">编程思录，记录思考</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/font/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/java/"><i class="fa "></i>Java</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/django/"><i class="fa "></i>Django</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/flask/"><i class="fa "></i>Flask</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/spider/"><i class="fa "></i>爬虫</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/data/"><i class="fa "></i>数据分析</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/money/"><i class="fa "></i>付费教程</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/life/"><i class="fa "></i>生活记录</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives"><i class="fa "></i>时间轴</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/about/"><i class="fa "></i>关于博主</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/liuyan/"><i class="fa "></i>留言板</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="零基础使用Django2.0.1打造在线教育网站（九）：初识后台管理">
            
	            零基础使用Django2.0.1打造在线教育网站（九）：初识后台管理
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/django/">django</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/django建站/">django建站</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/04/11</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>在前面的笔记中我们进行了需求分析和数据库的设计，本篇笔记主要介绍Django自带的用于后台管理的admin，并在此基础上介绍另一个插件xadmin的使用。</p>
<p>本篇笔记对应于第九篇代码，对应于github的位置是<a href="https://github.com/licheetools/eduline" target="_blank" rel="noopener">https://github.com/licheetools/eduline</a></p>
<h2 id="django自带的admin介绍"><a href="#django自带的admin介绍" class="headerlink" title="django自带的admin介绍"></a>django自带的admin介绍</h2><p>先点击菜单下的Tools按钮 ，然后点击下拉的 Run manage.py Task按钮，在命令行中输入：<code>runserver</code>再回车：<img src="https://upload-images.jianshu.io/upload_images/8964398-c332955dd793cd2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>在浏览器地址栏中输入<strong><a href="http://127.0.0.1:8000/admin" target="_blank" rel="noopener">http://127.0.0.1:8000/admin</a></strong>出现：<img src="https://upload-images.jianshu.io/upload_images/8964398-861580511e2f1b76.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>恭喜你，你已经进入到Django admin的后台管理网页了。</p>
<p>你可能会问，为什么会有这个页面，我可是什么操作也没干啊（一脸无辜）。对的，你确实什么也不用干，因为Django已经帮你做好了。</p>
<p>打开eduline/settings.py文件，找到第34行代码：<img src="https://upload-images.jianshu.io/upload_images/8964398-2b7c4081875c7329.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>看到没，admin它其实也是一个app，不过在我们新建项目时就已经创建好了，不用你去动手，是不是很人性化。</p>
<p>我们现在再来打开eduline/urls.py文件，找到第19行代码：<img src="https://upload-images.jianshu.io/upload_images/8964398-f278038ce7547ae4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>看到没，admin竟然已经自动在url中进行了配置（整个项目就它一个配置了url，可见重要性不一般），所以你前面访问<strong><a href="http://127.0.0.1:8000/admin" target="_blank" rel="noopener">http://127.0.0.1:8000/admin</a></strong>才会有响应。</p>
<p>我们回到后台页面：<img src="https://upload-images.jianshu.io/upload_images/8964398-861580511e2f1b76.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>有登录按钮，所以我们需要先注册一个账号，Django默认是不会给你创建账号的。</p>
<h3 id="注册超级管理员"><a href="#注册超级管理员" class="headerlink" title="注册超级管理员"></a>注册超级管理员</h3><p>先点击菜单下的Tools按钮 ，然后点击下拉的 Run manage.py Task按钮，在命令行中输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createsuperuser</span><br></pre></td></tr></table></figure></p>
<p>然后系统会提示你输入以下信息：Username，Email address，Password：<img src="https://upload-images.jianshu.io/upload_images/8964398-318068326946d5a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>接下来进行数据库的生成和迁移操作（因为users应用中多了一个名为NewBee的超级管理员），我们只需要对users 这个应用进行相关操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">makemigrations users</span><br><span class="line">migrate users</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-001d6cac2dace839.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="登入admin后台"><a href="#登入admin后台" class="headerlink" title="登入admin后台"></a>登入admin后台</h3><p>运行一下我们的项目，在浏览器地址栏输入：<strong><a href="http://127.0.0.1:8000/admin" target="_blank" rel="noopener">http://127.0.0.1:8000/admin</a></strong>，并在登录页面输入刚才注册的账号信息(默认登录方式是用户名 + 密码,后面会教你如何实现用户名或邮箱+密码登录的登录形式)，点击登录，就进入后台了：<img src="https://upload-images.jianshu.io/upload_images/8964398-d28ab8abe20d77e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>全是英文，我们去设置里配置一下：打开eduline/settings.py文件，找到第117行代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LANGUAGE_CODE = &apos;en-us&apos;</span><br><span class="line"></span><br><span class="line">TIME_ZONE = &apos;UTC&apos;</span><br></pre></td></tr></table></figure></p>
<p>我们修改为如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 将语言修改为中文</span><br><span class="line">LANGUAGE_CODE = &apos;zh-hans&apos;</span><br><span class="line"></span><br><span class="line"># 将时区修改为上海</span><br><span class="line">TIME_ZONE = &apos;Asia/Shanghai&apos;</span><br><span class="line"></span><br><span class="line"># 数据库存储使用时间，True时间会被存为UTC的时间。所以采用False</span><br><span class="line">USE_TZ = False</span><br></pre></td></tr></table></figure></p>
<p>刷新一下我们的后台网页：<img src="https://upload-images.jianshu.io/upload_images/8964398-29c76784bdca8b9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>恭喜你，admin被汉化成功了。接下来就是把我们前面定义的数据库字段都显示出来，首先把我们的UserProfile注册进来。</p>
<h2 id="注册UserProfile"><a href="#注册UserProfile" class="headerlink" title="注册UserProfile"></a>注册UserProfile</h2><p>打开eduline/apps/users/admin.py文件，添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line"></span><br><span class="line"># Register your models here.</span><br><span class="line"># 因为处于同一个目录之下，所以可以直接使用.models代替当前目录</span><br><span class="line">from .models import UserProfile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 写一个管理器，命名规则：Model+Admin</span><br><span class="line">class UserProfileAdmin(admin.ModelAdmin):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将UserProfile注册进我们的admin中, 并为它选择管理器UserProfileAdmin</span><br><span class="line">admin.site.register(UserProfile, UserProfileAdmin)</span><br></pre></td></tr></table></figure></p>
<p>刷新一下我们的后台网页：<img src="https://upload-images.jianshu.io/upload_images/8964398-cb0704f8904b6d98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>Users 是用户所在表的名称：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-3d566afa1275d6c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>点击右侧的增加用户信息：<img src="https://upload-images.jianshu.io/upload_images/8964398-a72494f0844da55e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>我们看到一下信息：<img src="https://upload-images.jianshu.io/upload_images/8964398-151e579951bcdf29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>我们尝试再次新建一个用户：<strong>NewBai</strong>：<img src="https://upload-images.jianshu.io/upload_images/8964398-1655e4ea2562c4f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>新建成功了，同时注意Django会自动帮我们把密码进行加密，而且不能反解，也就是说单向密码加密。</p>
<h2 id="xadmin的安装"><a href="#xadmin的安装" class="headerlink" title="xadmin的安装"></a>xadmin的安装</h2><p>还记得前面的一篇笔记吗，我让你新建一个文件夹A，把下载的xadmin文件放在里面，不记得请查阅这篇笔记：<a href="https://www.jianshu.com/p/b40f4a3b02fb" target="_blank" rel="noopener">零基础使用Django2.0.1打造在线教育网站（六）：教育网站开发配置</a>（更新一下，那个版本里面有太多的坑需要自己填，这里我就把已经填完坑的版本贴一下，大家在本篇笔记对应的Github上下载包，亲测有用）。<br>现在，我们新建一个名为extra_apps的Python package ,用来存放我们的第三方插件，并将前面下载的xadmin文件（解压之后）移入其中：<img src="https://upload-images.jianshu.io/upload_images/8964398-1dce8025e0ed8949.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>同时需要对路径进行配置：打开eduline/settings.py文件，找到里面的第16行代码，我们加入以下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import os, sys</span><br><span class="line"></span><br><span class="line"># Build paths inside the project like this: os.path.join(BASE_DIR, ...)</span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.insert(0, os.path.join(BASE_DIR, &apos;apps&apos;))</span><br><span class="line">sys.path.insert(0,os.path.join(BASE_DIR, &apos;extra_apps&apos;))</span><br></pre></td></tr></table></figure></p>
<p>接下来是xadmin的安装:在确保前面的操作完成以后，我们打开eduline/settings.py文件，找到里面的第35行代码，在后面修改为如下：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">    &apos;users&apos;,</span><br><span class="line">    &apos;courses&apos;,</span><br><span class="line">    &apos;organization&apos;,</span><br><span class="line">    &apos;operation&apos;,</span><br><span class="line">    &apos;xadmin&apos;,</span><br><span class="line">    &apos;crispy_forms&apos;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>然后打开eduline/urls.py文件，把urls中默认的admin修改为xadmin:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line">import xadmin</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&apos;xadmin/&apos;, xadmin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>然后进行我们数据库的生成和迁移操作：<code>makemigrations</code>和<code>migrate</code>：<img src="https://upload-images.jianshu.io/upload_images/8964398-38817e4fcb6c32a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>你会发现执行第一个命令就报错了，那是因为我们缺少一些库的支持，我们依次按照如下库：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip install future</span><br><span class="line">pip install six</span><br><span class="line">pip install httplib2</span><br><span class="line">pip install django-import-export</span><br><span class="line">pip install django-crispy-forms</span><br><span class="line">pip install django-formtools==2.1   # 记住一定是2.1的版本，否则会出错</span><br></pre></td></tr></table></figure></p>
<p>使用的命令为：<strong>pip install package -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple</a></strong><br>之后会安装一大堆库，我们使用pip list命令查看一下：<img src="https://upload-images.jianshu.io/upload_images/8964398-f1bac706138f7baa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>为了便于你查看自己是否缺少某个库，我这里贴一下我的各个库的版本（你各个库的版本不能低于我的版本，否则就可能会出错）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">(eduline) F:\Envs\eduline&gt;pip list</span><br><span class="line">Package                          Version</span><br><span class="line">-------------------------------- --------</span><br><span class="line">confusable-homoglyphs            3.1.1</span><br><span class="line">diff-match-patch                 20121119</span><br><span class="line">Django                           2.0.1</span><br><span class="line">django-crispy-forms              1.7.2</span><br><span class="line">django-crispy-forms-registration 0.1.3</span><br><span class="line">django-formtools                 2.1</span><br><span class="line">django-import-export             1.0.1</span><br><span class="line">django-registration              2.4.1</span><br><span class="line">django-reversion                 3.0.0</span><br><span class="line">et-xmlfile                       1.0.1</span><br><span class="line">future                           0.16.0</span><br><span class="line">httplib2                         0.11.3</span><br><span class="line">jdcal                            1.4</span><br><span class="line">mysqlclient                      1.3.13</span><br><span class="line">odfpy                            1.3.6</span><br><span class="line">openpyxl                         2.5.4</span><br><span class="line">Pillow                           5.2.0</span><br><span class="line">pip                              18.0</span><br><span class="line">pytz                             2018.5</span><br><span class="line">PyYAML                           3.13</span><br><span class="line">setuptools                       40.0.0</span><br><span class="line">six                              1.11.0</span><br><span class="line">tablib                           0.12.1</span><br><span class="line">unicodecsv                       0.14.1</span><br><span class="line">wheel                            0.31.1</span><br><span class="line">xlrd                             1.1.0</span><br><span class="line">xlwt                             1.3.0</span><br></pre></td></tr></table></figure></p>
<p>接下来，我们重新进行数据库的生成和迁移操作：<code>makemigrations</code>和<code>migrate</code>：<img src="https://upload-images.jianshu.io/upload_images/8964398-6fc3cb4df774f5d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt>,<br>看到没有，它也生成了几个数据表，我们打开Navicat，去数据库里看一下：<img src="https://upload-images.jianshu.io/upload_images/8964398-2c2cf86aa427503d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>现在我们运行一下我们的项目，在浏览器地址中输入<a href="http://127.0.0.1/xadmin,然后看到：![](https://upload-images.jianshu.io/upload_images/8964398-1b7b25d8b012310f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)" target="_blank" rel="noopener">http://127.0.0.1/xadmin,然后看到：![](https://upload-images.jianshu.io/upload_images/8964398-1b7b25d8b012310f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</a><br>恭喜你，xadmin的配置已经完成了，xadmin的页面是不是比admin的页面好看多了。</p>
<p>Xadmin使用Bootstrap3.0框架精心打造。基于Bootstrap3，Xadmin天生就支持在多种屏幕上无缝浏览，并完全支持Bootstrap主题模板，让您的管理后台也动感、多样起来。，这是它的的<a href="http://sshwsfc.github.io/xadmin/" target="_blank" rel="noopener">官方网站</a>:<img src="https://upload-images.jianshu.io/upload_images/8964398-5e318b09a7544317.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>你可以去看一下它的示例和文档，可能需要翻墙，不过这对你以后的运用确实帮助很大的。</p>
<h2 id="Xadmin的使用介绍"><a href="#Xadmin的使用介绍" class="headerlink" title="Xadmin的使用介绍"></a>Xadmin的使用介绍</h2><p>正如前面你所知道的，Xadmin是基于Django的admin来开发的，所以Xadmin也继承了许多admin的用法，下面就分别介绍一下它们的使用情况：</p>
<p>因为我们之前在admin里面已经注册了UserProfile，所以xadmin里面也就有了这个信息，那我们接下来就设置一下我们文件的格式，让系统默认去寻找我们<strong>xadmin</strong>的<strong>adminx.py</strong>文件，而不是去寻找原来<strong>admin的admin.py</strong>文件。</p>
<h3 id="验证码功能的实现"><a href="#验证码功能的实现" class="headerlink" title="验证码功能的实现"></a>验证码功能的实现</h3><p>我们打开eduline/apps/users这个文件夹，在里面新建一个名为<code>adminx.py</code>的文件，我们准备开始验证码功能的实现,在其中添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#！/user/bin/python</span><br><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># @Time: 2018/3/26 10:05</span><br><span class="line"># @Author: Envse</span><br><span class="line"># @File: adminx.py</span><br><span class="line"></span><br><span class="line"># 导入xadmin，如果出现字体底下出现红色属于正常现象（实际上环境已经配置过）</span><br><span class="line">import xadmin</span><br><span class="line"># 因为处于同一个目录之下，所以可以直接使用.models代替当前目录</span><br><span class="line">from .models import EmailVerifyRecord</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 写一个管理器，命名规则：Model+Admin,注意这里不再是继承admin，而是继承object这个最高类</span><br><span class="line">class EmailVerifyRecordAdmin(object):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将EmailVerifyRecord注册进我们的admin中, 并为它选择管理器EmailVerifyRecordAdmin</span><br><span class="line">xadmin.site.register(EmailVerifyRecord, EmailVerifyRecordAdmin)</span><br></pre></td></tr></table></figure></p>
<p>现在我们重新运行一下我们的项目，在浏览器地址栏中输入：<a href="http://127.0.0.1:8000/xadmin回车，出现：![](https://upload-images.jianshu.io/upload_images/8964398-96113eee67682a4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)" target="_blank" rel="noopener">http://127.0.0.1:8000/xadmin回车，出现：![](https://upload-images.jianshu.io/upload_images/8964398-96113eee67682a4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</a></p>
<p>你可能会好奇这个是怎样实现的，其实这就是你数据库设计的字段啊：你打开users/models.py文件，看到第30行代码：<img src="https://upload-images.jianshu.io/upload_images/8964398-cebc6d5713e28736.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>Meta信息就是用于后台显示的，其中verbose_name定义的是后台主页面显示字段，verbose_name_plural是verbose_name的复数形式，如果这两者不相等，那么verbose_name_plural就是在verbose_name后面加个s字母而已，所以我们尽量一样，便于管理和查看。</p>
<p>我们现在尝试添加一个邮箱验证码，点击右侧的增加邮箱验证码按钮，输入相关信息，可以看到添加成功了：<img src="https://upload-images.jianshu.io/upload_images/8964398-3b399581d49ae062.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>接下来，我们看一下右侧的显示列，点击一下：<img src="https://upload-images.jianshu.io/upload_images/8964398-960065424572cfb7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>里面可以选择显示的内容，我们现在想在刚才的页面同时显示这些全部信息，所以需要配置一下:我们打开users/adminx.py文件，在里面的管理器中设置list_display字段:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 写一个管理器，命名规则：Model+Admin,注意这里不再是继承admin，而是继承object这个最高类</span><br><span class="line">class EmailVerifyRecordAdmin(object):</span><br><span class="line">    # 配置后台显示的列信息</span><br><span class="line">    list_display = [&apos;code&apos;, &apos;email&apos;, &apos;send_type&apos;, &apos;send_time&apos;]  # 一次显示你想出现的多行数据，</span><br><span class="line"># 这里面的字段都是你在前面数据库中定义的，请保持数据的一致</span><br></pre></td></tr></table></figure></p>
<p>然后还可以配置过滤器，搜索框等，这里就不一一说明，直接贴上代码了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 写一个管理器，命名规则：Model+Admin,注意这里不再是继承admin，而是继承object这个最高类</span><br><span class="line">class EmailVerifyRecordAdmin(object):</span><br><span class="line">    # 配置后台显示的列信息</span><br><span class="line">    list_display = [&apos;code&apos;, &apos;email&apos;, &apos;send_type&apos;, &apos;send_time&apos;]  # 一次显示你想出现的多行数据</span><br><span class="line">    search_fields = [&apos;code&apos;, &apos;email&apos;, &apos;send_type&apos;]  # 查询你想要的数据,一般不依据时间进行查询</span><br><span class="line">    list_filter = [&apos;code&apos;, &apos;email&apos;, &apos;send_type&apos;, &apos;send_time&apos;]  # 过滤器</span><br></pre></td></tr></table></figure></p>
<p>之后刷新一下你的网页，成了这个样子：<img src="https://upload-images.jianshu.io/upload_images/8964398-c7cd6da15d50eb7a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>细心的小伙伴们可能发现，这里竟然可以导出操作，是的，这样变得很方便了：<img src="https://upload-images.jianshu.io/upload_images/8964398-689090eb8c18f58b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>你可以根据自己的喜好来导出不同的文件格式，比如xml:<img src="https://upload-images.jianshu.io/upload_images/8964398-d5a13eff7c81f618.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="admin-xadmin和其他后台管理系统的区别"><a href="#admin-xadmin和其他后台管理系统的区别" class="headerlink" title="admin, xadmin和其他后台管理系统的区别"></a>admin, xadmin和其他后台管理系统的区别</h3><p>像PHP，JAVA等其他语言，它们是按照一个功能模块来进行一个功能设计的。而admin和 xadmin就不一样了，它们是对于每张表都可以进行增删改查的管理器，因此我们还可以在增删改查的基础上加上我们自己的后台逻辑，完成我们自定义的功能。因此，从某种程度可以说它是不依赖于具体业务的，不管什么系统后台都是由表组成。</p>
<p>既然这样，我们可以在其余的各个表中，都加上这些个功能。</p>
<p>打开users/adminx.py文件，我们来实现轮播图的注册，和前面验证码的操作类似，这里就不细说，直接贴上代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from .models import Banner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class BannerAdmin(object):</span><br><span class="line">    list_display = [&apos;title&apos;, &apos;image&apos;, &apos;url&apos;, &apos;index&apos;, &apos;add_time&apos;]  # 一次显示你想出现的多行数据</span><br><span class="line">    search_fields = [&apos;title&apos;, &apos;image&apos;, &apos;url&apos;, &apos;index&apos;]  # 查询你想要的数据</span><br><span class="line">    list_filter = [&apos;title&apos;, &apos;image&apos;, &apos;url&apos;, &apos;index&apos;, &apos;add_time&apos;]  # 过滤器</span><br><span class="line"></span><br><span class="line">xadmin.site.register(Banner, BannerAdmin)</span><br></pre></td></tr></table></figure></p>
<p><strong>再次强调一下：这里面的字段都是你前面在数据库中定义的，请保持数据库字段定义的一致性，不要乱写，否则后面会出很大的BUG！</strong></p>
<p>刷新一下你的页面，就变成了这个样子：<img src="https://upload-images.jianshu.io/upload_images/8964398-ab24ba5f7ca9963c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>好了小伙伴们，你现在可以照葫芦画瓢了，尝试着把其余3个apps都注册到后台吧。那些，我们下一篇笔记再介绍，接下来教你一个自定义文件信息的技能。</p>
<h3 id="自定义文件信息"><a href="#自定义文件信息" class="headerlink" title="自定义文件信息"></a>自定义文件信息</h3><p>打开Pycharm,点击一下主菜单的File,选择下拉的Settings,选择Editor，再选择Code Style，选择文件模板：<img src="https://upload-images.jianshu.io/upload_images/8964398-860e82d7a0f74a1e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>看到5的信息了么：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#！/user/bin/python </span><br><span class="line"># -*- coding:utf-8 -*-  # 编码格式</span><br><span class="line"># @Time: $&#123;DATE&#125; $&#123;TIME&#125;   # 文件生成时间</span><br><span class="line"># @Author: Envse   # 作者</span><br><span class="line"># @File: $&#123;NAME&#125;.py   # 文件名</span><br></pre></td></tr></table></figure></p>
<p>你可以自定义这些信息，当然还可以根据4的选择不同来添加不同的信息。然后点击apply,最后是ok,这样你每次创建新的py文件以后，这些信息就都会出现在文件的头部了。怎么样，新技能Get了没有？</p>
<p>至此，关于初识后台管理这一部分就先说这么多，下一篇笔记就完善其余3个apps的注册，还有xadmin的全局配置，打造一个属于自己的网站后台管理系统。</p>
<p>本篇笔记对应于第九篇代码，对应于github的位置是<a href="https://github.com/licheetools/eduline，另外xadmin的原始安装包我也上传了，大家可以前往下载，有空的话，可以给项目一个star,感谢你的赏阅。" target="_blank" rel="noopener">https://github.com/licheetools/eduline，另外xadmin的原始安装包我也上传了，大家可以前往下载，有空的话，可以给项目一个star,感谢你的赏阅。</a></p>

    </div>
    
        <div class="reward" ontouchstart>
    <div class="reward-wrap">赏
        <div class="reward-box">
            
            
                <span class="reward-type">
                    <img class="wechat" src="https://upload-images.jianshu.io/upload_images/8964398-58d04ffa926103d9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">觉得不错，赏包辣条吃呗！</p>
</div>


    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href target="_blank">编程思录</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/04/11/零基础使用Django2-0-1打造在线教育网站（十）：后台管理配置/" class="pre-post btn btn-default" title="零基础使用Django2.0.1打造在线教育网站（十）：后台管理配置">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">零基础使用Django2.0.1打造在线教育网站（十）：后台管理配置</span>
        </a>
    
    
        <a href="/2018/04/11/零基础使用Django2-0-1打造在线教育网站（八）：数据库字段的定义-下/" class="next-post btn btn-default" title="零基础使用Django2.0.1打造在线教育网站（八）：数据库字段的定义(下)">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">零基础使用Django2.0.1打造在线教育网站（八）：数据库字段的定义(下)</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '8zvHFFu5l2ah8lh0DEPH393B-gzGzoHsz',
            appKey: 'UNmB24200qMtyyrun5z99nOE',
            placeholder: '听说长得好看的，都已经留言了！',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#写在前面"><span class="toc-text">写在前面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#django自带的admin介绍"><span class="toc-text">django自带的admin介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#注册超级管理员"><span class="toc-text">注册超级管理员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#登入admin后台"><span class="toc-text">登入admin后台</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注册UserProfile"><span class="toc-text">注册UserProfile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xadmin的安装"><span class="toc-text">xadmin的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Xadmin的使用介绍"><span class="toc-text">Xadmin的使用介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#验证码功能的实现"><span class="toc-text">验证码功能的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#admin-xadmin和其他后台管理系统的区别"><span class="toc-text">admin, xadmin和其他后台管理系统的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义文件信息"><span class="toc-text">自定义文件信息</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <span>Copyright &copy; 2017-2019
                </span> |
                <span>
				编程思录,保留所有权利
                    <!--Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>-->
                </span> |
                <span>
				<a style="color: #black" href="http://www.miitbeian.gov.cn">赣ICP备18013455号-5</a>
                    <!--Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>-->
                </span>
            </div>
			
			<div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>

            </div>
			
			<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277113902'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s96.cnzz.com/z_stat.php%3Fid%3D1277113902%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
        </div>
    </div>
</div>




    <script src="/assets/tagcanvas.min.js?rev=2.9"></script>
    <script>
        var tagOption = {
            textColour: 'red', // 字体颜色
            outlineMethod: 'block', // 选中模式
            outlineColour: '#FFDAB9', // 选中模式的颜色
            interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
            textHeight: 13,
            outlineRadius: 3,
            freezeActive: true || '', // 选中的标签是否继续滚动
            frontSelect: true || '', // 不选标签云后部的标签
            initial: [0.1, -0.1],
            depth: 0.5,
            decel: 0.95,
            maxSpeed: 0.03,
            reverse: true || '', // 是否反向触发
            fadeIn: 500, // 进入动画时间
            wheelZoom: false || '' // 是否启用鼠标滚轮
        }
        TagCanvas.Start('tag-cloud-3d','',tagOption);
    </script>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>